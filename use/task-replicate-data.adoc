---
sidebar: sidebar
permalink: use/task-replicate-data.html
keywords: amazon fsx for netapp ontap, fsx, manage fsx for ontap system, delete fsx for ontap system, remove fsx for ontap system, throughput capacity, change throughput, automatic capacity management, capacity management, storage capacity, replication, classification, sync, backup, recovery, bluexp, NetApp Console
summary: After you create or discover an FSx for ONTAP system in NetApp Console, you can manage the file system and use NetApp data services that provide capabilities like backup and recovery.
---

= Replicate data to FSx for ONTAP in NetApp Console
:icons: font
:imagesdir: ../media/

[.lead]
Replicate data to protect against data loss if the region where your data resides experiences a disaster. Data replication is supported between FSx for ONTAP file systems and on-premises ONTAP systems or Cloud Volumes ONTAP. 

For storage VM migration, you must complete the cut over operation right after you create a replication relationship. 

== About this task

Replication protects your data from regional disasters and supports storage VM migration.

Replicated volumes in the target file system are data protection (DP) volumes and follow the naming format: `{OriginalVolumeName}_copy`.

If you replicate a source volume with immutable files, the target volume and file system remain locked until the source volume's retention period ends. The immutable files feature is available when you link:https://docs.netapp.com/us-en/workload-fsx-ontap/create-volume.html[create a volume] for an FSx for ONTAP file system. 

[NOTE]
===============================
* Replication isn't supported for block volumes using iSCSI or NVMe protocols.
* You can replicate one source (read/write) volume or one data protection (DP) volume. Cascading replication is supported, but a third hop isn't. Learn more about link:https://review.docs.netapp.com/us-en/workload-fsx-ontap_cascade-replication/cascade-replication.html[cascading replication^].
===============================

=== Migration use cases
 
When you select the migration use case, you can optionally select to replicate storage VM data and configuration settings for a single storage VM. When migrating data and configuration settings simultaneously, ensure that the last replication for the volume completed in the last 24 hours. All volumes in the same storage VM must be selected to use this feature. The tiering policy for all volumes defaults to the tiering policy of the source volume, which is recommended for migration use cases.

Workload Factory supports the following source systems for migration replication. 

* On-premises ONTAP systems 
* First-generation FSx for ONTAP file systems
* Second-generation FSx for ONTAP file systems to scale down nodes or capacity at once
and a first-generation FSx for ONTAP file system 

To migrate storage VM data and configuration settings, you must complete two operations.

1. <<Create a replication relationship,Create a replication relationship>>. 
2. Immediately <<Cut over replication,cut over replication>> to permanently migrate data and configuration settings from the source file system to the target FSx for ONTAP file system.

== Create a replication relationship
Replicate data between two FSx for ONTAP file systems, between an on-premises ONTAP system and an FSx for ONTAP file system, or between Cloud Volumes ONTAP and an FSx for ONTAP file system.

.Before you begin
Review these requirements before you begin.

* To replicate data between FSx for ONTAP and on-premises ONTAP or Cloud Volumes ONTAP, you must associate a link to a file system. link:https://docs.netapp.com/us-en/workload-fsx-ontap/create-link.html[Learn how to associate an existing link or to create and associate a new link]. After you associate the link, return to this operation. 
* For replication from an on-premises ONTAP system to an FSx for ONTAP file system, make sure you have discovered the on-premises ONTAP system. 
* Replication isn't supported for volumes in a state other than available, created, or misconfigured, and when the ONTAP version isn't compatible.
* For migration use cases ensure that the last replication for the volume completed in the last 24 hours before you create a replication relationship with storage VM data and configuration settings.

.Steps
. From the NetApp Console Systems page, drag the source FSx for ONTAP file system, on-premises ONTAP system, or Cloud Volumes ONTAP system on top of the target FSx for ONTAP file system and select *Replication*. 
. On the Create replication page, select source volumes to replicate and then *Next*.
. Under Replication target, provide the following:  
.. *Target name*: You applied the target name when you dragged and dropped the source storage system on the target system in the Console Systems page. 

include::https://raw.githubusercontent.com/NetAppDocs/workload-fsx-ontap/main/_include/create-replication.adoc[]

[start=5]
//Rachel L: Added a hack to make the last step have a numbered step in the right order.
. Select *Create*. 

.Result
The replication relationship appears in the *Replication relationships* tab in the target FSx for ONTAP file system. 

If you created a replication relationship for migration purposes, you must cut over all the volumes and their associated storage VM to complete migration of storage VM data and configuration settings to the target FSx for ONTAP file system.

== Cut over replication for migration use cases

After creating a replication relationship for a migration use case, you must immediately cut over replication to complete migration of storage VM data and configuration settings to a target FSx for ONTAP file system. Cutover replication permanently migrates data and storage VM configuration settings from the source file system to the target FSx for ONTAP file system. During the cutover, data gets replicated for the last time. The system deletes the source volume(s) after cutover completes. You can't undo this action. 

.Before you begin
Review these requirements before you begin.

* Stop any client access to your storage VM before you cut over replication.
* Make sure all source volumes are not serving any data before you cut over replication.
* The FSx for ONTAP file system you use for the replication relationship must have an associated link. link:https://docs.netapp.com/us-en/workload-fsx-ontap/create-link.html[Learn how to associate an existing link or to create and associate a new link]. After you associate the link, return to this operation.

.Steps
. In the NetApp Console, select the menu image:workloads-menu-icon.png[The hamburger menu icon is used to navigate to workloads like storage, eda, ai, databases, vmware, and administration.] and then select *Storage*.

include::https://raw.githubusercontent.com/NetAppDocs/workload-fsx-ontap/main/_include/cutover-replication.adoc[]
